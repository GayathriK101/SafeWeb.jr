<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Parent Dashboard - SaveWebJr</title>
  <link rel="stylesheet" href="parent-dashboard.css" />
</head>
<body>
  <div class="dashboard">
    <h1>Welcome, Parent</h1>

    <div class="card">
      <h2>Kid‚Äôs Behavior Score</h2>
      <p id="score">Loading...</p>
    </div>

    <div class="card">
      <h2>Recent Alerts</h2>
      <ul id="alertsList">
        <li>Loading...</li>
      </ul>
    </div>

    <div class="card">
      <h2>Content Sensitivity Monitor</h2>
      <p id="monitorStatus">Loading...</p>
    </div>

    <div class="card">
      <h2>Digital Wellbeing Summary</h2>
      <p>Your child seems to be using the internet responsibly. Keep checking in casually to support good habits.</p>
    </div>

    <div class="card">
      <h2>Conversation Starters</h2>
      <ul>
        <li>‚ÄúHey, what‚Äôs the coolest thing you found online this week?‚Äù</li>
        <li>‚ÄúWant to show me a site you liked recently?‚Äù</li>
      </ul>
    </div>
  </div>

  <script>
    // Load flagged alerts
    chrome.storage.local.get(["flagged"], function(result) {
      const alerts = result.flagged || [];
      const alertsList = document.getElementById("alertsList");
      const monitorStatus = document.getElementById("monitorStatus");
      const scoreElement = document.getElementById("score");

      alertsList.innerHTML = "";
      if (alerts.length === 0) {
        alertsList.innerHTML = "<li>No alerts at the moment.</li>";
        monitorStatus.textContent = "No explicit or suspicious content flagged recently.";
        scoreElement.textContent = "Score: 100 / 100 ‚Äî Excellent behavior!";
      } else {
        alerts.slice(-5).reverse().forEach(alert => {
          const li = document.createElement("li");
          li.textContent = ‚ö† ${alert.words.join(", ")} on ${alert.url} at ${new Date(alert.timestamp).toLocaleString()};
          alertsList.appendChild(li);
        });

        monitorStatus.textContent = üö® ${alerts.length} flagged incident(s) in total.;
        const score = Math.max(100 - alerts.length * 5, 50);
        scoreElement.textContent = Score: ${score} / 100 ‚Äî Monitor regularly.;
      }
    });
  </script>
</body>
</html>
